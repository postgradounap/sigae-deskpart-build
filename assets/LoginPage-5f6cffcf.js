import{_ as y,b as _,e as w,g as t,a as I,u as P,j as u,k as f,d as b,l as V,m as v,r as C,i as $,w as c,f as r,h as a,n as B,p as S,q as A,s as F,v as L,x as O,y as z,o as J,z as M}from"./index-4ffce595.js";/* empty css                     *//* empty css                 */import{_ as j}from"./logoCuboWithText-6dbe6dd2.js";const q="/assets/login-image-4936634a.svg",K={},R={class:"bg-white max-md:hidden flex items-center justify-center"},U=t("img",{src:q,alt:"login-image",class:"object-cover p-14 filter fill-red-500"},null,-1),T=[U];function D(n,s){return _(),w("div",R,T)}const H=y(K,[["render",D]]),G=n=>n.split("@")[1]==="postgradounap.edu.pe",i="blur",Q={email:[{required:!0,message:"Por favor ingrese su correo electrónico",trigger:i},{type:"email",message:"Por favor ingrese un correo electrónico válido",trigger:i},{validator:(n,s,e)=>{G(s)?e():e(new Error("Por favor ingrese un correo electrónico institucional"))},trigger:i}],password:[{required:!0,message:"Por favor ingrese su contraseña",trigger:i},{min:6,message:"La contraseña debe tener al menos 6 caracteres",trigger:i}]},W=async n=>{try{const{login:s}=I.routes.get().desk,{data:e}=await P.post(s,n),o="deskpart";return localStorage.setItem(`${o}_token`,e.token),localStorage.setItem(`${o}_groups`,JSON.stringify(e.groups)),localStorage.setItem(`${o}_user`,JSON.stringify(e.user)),localStorage.setItem(`${o}_person`,JSON.stringify(e.person)),localStorage.setItem(`${o}_area`,JSON.stringify(e.area)),u.user.set(e.user),u.token.set(e.token),u.person.set(e.person),u.area.set(e.area),f.success(`Bienvenido ${e.person.nombres}`),!0}catch{return f.error("No se pudo iniciar sesión"),!1}},X=t("div",{class:"flex flex-col gap-1 mb-10"},[t("h3",{class:"text-[22px] text-start font-medium"},"Iniciar Sesión"),t("p",{class:"text-base text-start"},"para acceder a Tramite Documentario")],-1),Y=t("a",{href:"/",class:"primary-color text-button text-sm hover:underline"}," ¿Olvido la contraseña? ",-1),Z=b({__name:"loginForm",setup(n){const s=V(),e=v(),o=C({}),d=v(!1),g=async()=>{e.value.validate(async x=>{if(!x){f.error("Por favor, rellene los campos correctamente");return}d.value=!0;const l=await W(o);d.value=!1,l&&s.push(A.Home)})};return(x,l)=>{const k=j,h=F,m=L,E=O,N=z;return _(),$(N,{class:"text-center",model:a(o),rules:a(Q),ref_key:"form",ref:e,"label-position":"top"},{default:c(()=>[r(k),X,r(m,{prop:"email",label:"Correo Electrónico Institucional"},{default:c(()=>[r(h,{autocomplete:"off",placeholder:"usuario@postgradounap.edu.pe",size:"large",modelValue:a(o).email,"onUpdate:modelValue":l[0]||(l[0]=p=>a(o).email=p)},null,8,["modelValue"])]),_:1}),r(m,{prop:"password",label:"Contraseña"},{default:c(()=>[r(h,{modelValue:a(o).password,"onUpdate:modelValue":l[1]||(l[1]=p=>a(o).password=p),type:"password",placeholder:"Contraseña",size:"large",onKeyup:B(g,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),r(m,null,{default:c(()=>[r(E,{loading:a(d),type:"primary",color:"#245FA6",size:"large",class:"w-full",onClick:g},{default:c(()=>[S("Iniciar Sesión")]),_:1},8,["loading"])]),_:1}),Y]),_:1},8,["model","rules"])}}});const ee={},oe={class:"container-center"},te={class:"md:w-[890px] md:h-[456px]"},se={class:"bg-white shadow-lg"},re={class:"flex w-full"},ne=t("div",{class:"p-5 flex flex-col gap-2 text-[#555F71] md:text-sm md:text-center max-md:text-center max-md:text-sm"},[t("p",null,[S("¿No tiene acceso a su cuenta? "),t("a",{href:"/",class:"text-button"},"Comunícate con soporte")]),t("p",null,"© 2023, Escuela de Postgrado UNAP. Reservados todos los derechos.")],-1);function ae(n,s){const e=Z,o=H;return _(),w("div",oe,[t("div",te,[t("div",se,[t("div",re,[r(e,{class:"flex-1 border-r p-12"}),r(o,{class:"flex-1"})])])]),ne])}const le=y(ee,[["render",ae]]),de=b({__name:"LoginPage",setup(n){return J(()=>{M()}),(s,e)=>{const o=le;return _(),$(o)}}});export{de as default};
