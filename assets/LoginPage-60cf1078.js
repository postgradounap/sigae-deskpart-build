import{_ as y,b as _,e as w,g as t,a as V,u as N,j as p,k as f,d as $,l as I,m as v,r as B,i as b,w as c,f as n,h as a,n as C,p as k,q as A,s as F,v as L,x as z,y as M,o as O,z as U}from"./index-87df4a4e.js";/* empty css                     */import{_ as j}from"./logoCuboWithText-ed99381d.js";const q="/assets/login-image-4936634a.svg",J={},K={class:"bg-white max-md:hidden flex items-center justify-center"},R=t("img",{src:q,alt:"login-image",class:"object-cover p-14 filter fill-red-500"},null,-1),T=[R];function D(r,s){return _(),w("div",K,T)}const H=y(J,[["render",D]]),G=r=>r.split("@")[1]==="postgradounap.edu.pe",i="blur",Q={email:[{required:!0,message:"Por favor ingrese su correo electrónico",trigger:i},{type:"email",message:"Por favor ingrese un correo electrónico válido",trigger:i},{validator:(r,s,e)=>{G(s)?e():e(new Error("Por favor ingrese un correo electrónico institucional"))},trigger:i}],password:[{required:!0,message:"Por favor ingrese su contraseña",trigger:i},{min:6,message:"La contraseña debe tener al menos 6 caracteres",trigger:i}]},W=async r=>{try{const{login:s}=V.routes.get().desk,{data:e}=await N.post(s,r),o="deskpart";return localStorage.setItem(`${o}_token`,e.token),localStorage.setItem(`${o}_groups`,JSON.stringify(e.groups)),localStorage.setItem(`${o}_user`,JSON.stringify(e.user)),localStorage.setItem(`${o}_person`,JSON.stringify(e.person)),p.user.set(e.user),p.token.set(e.token),p.person.set(e.person),f.success(`Bienvenido ${e.person.nombres}`),!0}catch(s){return f.error(s.message),!1}},X=t("div",{class:"flex flex-col gap-1 mb-10"},[t("h3",{class:"text-[22px] text-start font-medium"},"Iniciar Sesión"),t("p",{class:"text-base text-start"},"para acceder a Tramite Documentario")],-1),Y=t("a",{href:"/",class:"primary-color text-button text-sm hover:underline"}," ¿Olvido la contraseña? ",-1),Z=$({__name:"loginForm",setup(r){const s=I(),e=v(),o=B({}),u=v(!1),g=async()=>{e.value.validate(async x=>{if(!x){f.error("Por favor, rellene los campos correctamente");return}u.value=!0;const l=await W(o);u.value=!1,l&&s.push(A.Home)})};return(x,l)=>{const S=j,h=F,m=L,E=z,P=M;return _(),b(P,{class:"text-center",model:a(o),rules:a(Q),ref_key:"form",ref:e},{default:c(()=>[n(S),X,n(m,{prop:"email"},{default:c(()=>[n(h,{autocomplete:"off",placeholder:"Usuario",size:"large",modelValue:a(o).email,"onUpdate:modelValue":l[0]||(l[0]=d=>a(o).email=d)},null,8,["modelValue"])]),_:1}),n(m,{prop:"password"},{default:c(()=>[n(h,{modelValue:a(o).password,"onUpdate:modelValue":l[1]||(l[1]=d=>a(o).password=d),type:"password",placeholder:"Contraseña",size:"large",onKeyup:C(g,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),n(m,null,{default:c(()=>[n(E,{loading:a(u),type:"primary",color:"#245FA6",size:"large",class:"w-full",onClick:g},{default:c(()=>[k("Iniciar Sesión")]),_:1},8,["loading"])]),_:1}),Y]),_:1},8,["model","rules"])}}});const ee={},oe={class:"container-center"},te={class:"md:w-[890px] md:h-[456px]"},se={class:"bg-white shadow-lg"},ne={class:"flex w-full"},re=t("div",{class:"p-5 flex flex-col gap-2 text-[#555F71] md:text-sm md:text-center max-md:text-center max-md:text-sm"},[t("p",null,[k("¿No tiene acceso a su cuenta? "),t("a",{href:"/",class:"text-button"},"Comunícate con soporte")]),t("p",null,"© 2023, Escuela de Postgrado UNAP. Reservados todos los derechos.")],-1);function ae(r,s){const e=Z,o=H;return _(),w("div",oe,[t("div",te,[t("div",se,[t("div",ne,[n(e,{class:"flex-1 border-r p-12"}),n(o,{class:"flex-1"})])])]),re])}const le=y(ee,[["render",ae]]),ue=$({__name:"LoginPage",setup(r){return O(()=>{U()}),(s,e)=>{const o=le;return _(),b(o)}}});export{ue as default};
